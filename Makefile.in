
all : gc/libgc.a src/gosh

gc/libgc.a :
	cd gc; $(MAKE) CC=@CC@

src/gosh : gc/libgc.a
	cd src; $(MAKE)

test : src/gosh
	cd src; $(MAKE) test

clean :
	rm -rf core *~
	cd gc; $(MAKE) clean
	cd src; $(MAKE) clean
	cd lib; $(MAKE) clean
	cd test; $(MAKE) clean
	cd ext/uvector; $(MAKE) clean

distclean : clean
	cd src; $(MAKE) distclean
	cd lib; $(MAKE) distclean
	cd ext/uvector; $(MAKE) distclean
	rm -rf Makefile config.cache config.log config.status

install :
	cd src; $(MAKE) install
	cd lib; $(MAKE) install

realclean : clean
	cd src; $(MAKE) realclean
	cd lib; $(MAKE) realclean
	cd ext/uvector; $(MAKE) realclean
	rm -rf configure Makefile config.cache config.log config.status

