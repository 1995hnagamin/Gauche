#
# Makefile.in for Gauche/lib
#
#  $Id: Makefile.in,v 1.50 2002-04-20 01:07:58 shirok Exp $
#

prefix = @prefix@
exec_prefix = @exec_prefix@
SCM_INSTALL_DIR = @datadir@/gauche/@GAUCHE_VERSION@/lib
SLIB_DIR = @SLIB_DIR@

SCMS = srfi-0.scm \
       srfi-1.scm srfi-1/cat.scm srfi-1/filter.scm srfi-1/finder.scm \
       srfi-1/folder.scm srfi-1/generator.scm srfi-1/mapper.scm \
       srfi-1/nary.scm srfi-1/nth.scm srfi-1/pred.scm srfi-1/selector.scm \
       srfi-1/set.scm srfi-1/zipper.scm \
       srfi-2.scm srfi-9.scm srfi-11.scm \
       srfi-13.scm srfi-13/casemap.scm srfi-13/comparer.scm \
       srfi-13/filter.scm srfi-13/folder.scm srfi-13/generator.scm \
       srfi-13/internal.scm srfi-13/kmp.scm srfi-13/misc.scm srfi-13/hash.scm \
       srfi-13/pred.scm srfi-13/prefix.scm srfi-13/revapp.scm \
       srfi-13/rotator.scm srfi-13/searcher.scm srfi-13/selector.scm \
       srfi-14.scm srfi-14/query.scm srfi-14/set.scm \
       slib.scm japanize-euc.scm \
       gauche/object.scm gauche/test.scm gauche/macroutil.scm \
       gauche/regexp.scm gauche/process.scm gauche/with.scm gauche/signal.scm \
       gauche/numerical.scm gauche/let-opt.scm gauche/logical.scm \
       gauche/vm/disasm.scm gauche/vm/debugger.scm \
       gauche/serializer.scm gauche/serializer/aserializer.scm \
       gauche/parseopt.scm gauche/interactive.scm gauche/selector.scm \
       gauche/logger.scm gauche/port.scm gauche/common-macros.scm \
       gauche/singleton.scm gauche/validator.scm gauche/version.scm \
       gauche/collection.scm gauche/sequence.scm gauche/interpolate.scm \
       gauche/time.scm gauche/parameter.scm \
       util/isomorph.scm util/toposort.scm util/queue.scm util/tree.scm \
       port/jfilter.scm port/stk.scm \
       file/filter.scm \
       rfc/822.scm rfc/base64.scm rfc/uri.scm rfc/cookie.scm \
       rfc/quoted-printable.scm \
       text/csv.scm text/tr.scm text/parse.scm text/tree.scm \
       text/html-lite.scm \
       www/cgi.scm

SUBDIRS = gauche gauche/vm gauche/serializer file port rfc \
	  srfi-1 srfi-13 srfi-14 util text www

INSTALL=@INSTALL@

all : $(SCMS)

clean :
	rm -f core *~ gauche/*~ gauche/vm/*~ gauche/serializer/*~ port/*~ rfc/*~ srfi-1/*~

distclean : clean
	rm -f Makefile slib.scm

realclean : clean
	rm -f Makefile slib.scm

install : all
	for d in $(SUBDIRS); do \
	  $(INSTALL) -d $(SCM_INSTALL_DIR)/$$d; \
	done
	for f in $(SCMS); do \
	  $(INSTALL) -m 444 $$f $(SCM_INSTALL_DIR)/$$f; \
	done

# If we have slib, creates catalog file for Gauche.   This should be called
# after everything is installed.
# For RPM, this has to be called in the postprocess script instead of
# installation script.
slibcat : 
	if test -f $(SLIB_DIR)/require.scm; then \
	  $(exec_prefix)/bin/gosh -uslib -e "(load (in-vicinity (library-vicinity) \"mklibcat\"))" -e "(exit 0)";\
	fi

