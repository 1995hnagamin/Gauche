#!/bin/sh
# Generate gauche/arch.h from the configuration info.
# This must run after gauche-config is created.

arch=`./gauche-config --arch | sed 's@\\\\@\\\\\\\\@g'`
syslibdir=`./gauche-config --syslibdir | sed 's@\\\\@\\\\\\\\@g'`
sysarchdir=`./gauche-config --sysarchdir | sed 's@\\\\@\\\\\\\\@g'`
sitelibdir=`./gauche-config --sitelibdir | sed 's@\\\\@\\\\\\\\@g'`
sitearchdir=`./gauche-config --sitearchdir | sed 's@\\\\@\\\\\\\\@g'`

rm -f gauche/arch.h
echo "/* Generated by genarch.  DO NOT EDIT */" > gauche/arch.h
echo '#define GAUCHE_ARCH' '"'"$arch"'"' >> gauche/arch.h
echo '#define GAUCHE_LIB_DIR' '"'"$syslibdir"'"' >> gauche/arch.h
echo '#define GAUCHE_ARCH_DIR' '"'"$sysarchdir"'"' >> gauche/arch.h
echo '#define GAUCHE_SITE_LIB_DIR' '"'"$sitelibdir"'"' >> gauche/arch.h
echo '#define GAUCHE_SITE_ARCH_DIR' '"'"$sitearchdir"'"' >> gauche/arch.h
