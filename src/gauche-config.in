#! /bin/sh

#
# Retrieve configuration parameters
#
# $Id: gauche-config.in,v 1.16 2002-07-19 02:21:47 shirok Exp $
#

prefix=${prefix:-@prefix@}
exec_prefix=@exec_prefix@

cc="@CC@"

datadir=@datadir@/gauche
archdir=@libdir@/gauche

gauche_incdir="$archdir/@GAUCHE_VERSION@/include"
gauche_libdir="$datadir/@GAUCHE_VERSION@/lib"
gauche_aclocaldir="$datadir/@GAUCHE_VERSION@/"
gauche_archdir="$archdir/@GAUCHE_VERSION@/@host@"
gauche_siteincdir="$archdir/site/include"
gauche_sitelibdir="$datadir/site/lib"
gauche_sitearchdir="$archdir/site/@GAUCHE_VERSION@/@host@"
gauche_version=@GAUCHE_VERSION@
gauche_libs="@LIBS@"
gauche_configure_args="@GAUCHE_CONFIGURE_ARGS@"
arch="@host@"

local_incdir="@LOCAL_INC@"
local_libdir="@LOCAL_LIB@"
shlib_so_suffix="@SHLIB_SO_SUFFIX@"
shlib_so_cflags="@SHLIB_SO_CFLAGS@"
shlib_so_ldflags="@SHLIB_SO_LDFLAGS@"
shlib_so_libs="@SHLIB_LIBS_FOR_EXT@"
default_cflags="@DEFAULT_CFLAGS@"

shlib_dylib_suffix="@SHLIB_DYLIB_SUFFIX@"
shlib_dylib_ldflags="@SHLIB_DYLIB_LDFLAGS@"
shlib_main_ldflags="@SHLIB_MAIN_LDFLAGS@"
libgauche_so="@LIBGAUCHE_SO@"

usage () {
    echo "Usage: gauche-config [option]"
    echo
    echo "General parameter"
    echo "  -V   the current gauche version"
    echo
    echo "Parameters to compile an application using Gauche"
    echo "  -I   include paths required to compile programs using gauche"
    echo "  -L   library paths required to link programs using gauche"
    echo "  -l   libraries required to link programs using gauche"
    echo "  --cc name of the compiler"
    echo "  --ac directory that contains Gauche specific autoconf macro"
    echo "  --reconfigure"
    echo "       prints the command line used to configure the current"
    echo "       installation."
    echo "  --arch"
    echo "       prints the architecture signature"
    echo
    echo "Parameters to install files"
    echo "  --syslibdir/--sitelibdir"
    echo "       directories where system/site scheme files go"
    echo "  --sysarchdir/--sitearchdir"
    echo "       directories where system/site DSO files go"
    echo "  --sysincdir/--siteincdir"
    echo "       directories where system/site header files of extensions go"
    echo
    echo "Parameters to compile Gauche extention"
    echo "  --so-suffix     object file suffix of the gauche extension"
    echo "  --so-cflags     flags required to compile shared object"
    echo "  --so-ldflags    flags required to link a gauche extension"
    echo "  --so-libs       libraries to be linked with a gauche extension"
    echo "  --dylib-suffix  dynamic/shared library file suffix of the system"
    echo "  --dylib-ldflags flags required to link dynamic/shared library file"
    echo "  --libgauche-so  the name of shared library of libgauche"
    exit 1
}

if [ $# != 1 ]; then usage; fi;

case $1 in
  -V) echo $gauche_version;;
  -I) echo "-I$gauche_incdir $local_incdir";;
  -L) echo "-L$gauche_archdir $local_libdir";;
  -l) if [ "@GOSH_USE_SHLIB@" = "yes" ]; then
        echo "-lgauche $gauche_libs"
      else
        echo "$gauche_libs"
      fi;;
  --cc) echo $cc;;
  --ac) echo $gauche_aclocaldir;;
  --reconfigure) echo ./configure $gauche_configure_args;;

  --sysincdir) echo $gauche_incdir;;
  --siteincdir) echo $gauche_siteincdir;;
  --syslibdir) echo $gauche_libdir;;
  --sitelibdir) echo $gauche_sitelibdir;;
  --sysarchdir) echo $gauche_archdir;;
  --sitearchdir) echo $gauche_sitearchdir;;
  --arch) echo $arch;;

  --local-incdir) echo $local_incdir;;
  --local-libdir) echo $local_libdir;;
  --so-suffix) echo $shlib_so_suffix;;
  --so-cflags) echo $shlib_so_cflags;;
  --so-ldflags) echo $shlib_so_ldflags;;
  --so-libs)    echo $shlib_so_libs;;
  --dylib-suffix) echo $shlib_dylib_suffix;;
  --dylib-ldflags) echo $shlib_dylib_ldflags;;
  --libgauche-so) echo $libgauche_so;;
  --default-cflags) echo $default_cflags;;
      
  *)  usage;;
esac

# Local variables:
# mode: shell-script
# end:
