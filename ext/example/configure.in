dnl
dnl Example of configuring Gauche extension
dnl
dnl $Id: configure.in,v 1.2 2001-03-10 09:57:59 shiro Exp $
AC_INIT(example.c)

dnl Determine if we're configuring inside of Gauche main source tree or not.
if test -f ../../src/gauche.h; then
  GAUCHE_CONFIG="sh ../../src/gauche-config"
  GAUCHE_TOP='../../'
  GAUCHE_INC="-I../../src -I../../gc"
  GOSH="../../src/gosh"
else
  GAUCHE_CONFIG=gauche-config
  GAUCHE_TOP=
  GAUCHE_INC=`gauche-config -I`
  GOSH=gosh
fi
AC_SUBST(GAUCHE_CONFIG)
AC_SUBST(GAUCHE_TOP)
AC_SUBST(GAUCHE_INC)
AC_SUBST(GOSH)

dnl A user has a choice to install the module into Gauche system directory
dnl or site local directory, by setting environment variable INSTALL_TYPE
dnl to either 'sys' or 'site'.   The variable can be overridden at make time.
: ${INSTALL_TYPE=site}  dnl This sets the default.
AC_SUBST(INSTALL_TYPE)

dnl Get compiler parameters which Gauche has been compiled with.
CC="`$GAUCHE_CONFIG --cc`"
AC_SUBST(CC)

CFLAGS="$CFLAGS $GAUCHE_INC `$GAUCHE_CONFIG --so-cflags`"
LDFLAGS="$LDFLAGS `$GAUCHE_CONFIG --so-ldflags`"

INST_INC_DIR=`$GAUCHE_CONFIG --incdir`
INST_SCM_DIR=`$GAUCHE_CONFIG --libdir`
INST_ARCH_DIR=`$GAUCHE_CONFIG --archdir`
INST_SITE_INC_DIR=`$GAUCHE_CONFIG --siteincdir`
INST_SITE_SCM_DIR=`$GAUCHE_CONFIG --sitelibdir`
INST_SITE_ARCH_DIR=`$GAUCHE_CONFIG --sitearchdir`

AC_SUBST(INST_INC_DIR)
AC_SUBST(INST_SCM_DIR)
AC_SUBST(INST_ARCH_DIR)
AC_SUBST(INST_SITE_INC_DIR)
AC_SUBST(INST_SITE_SCM_DIR)
AC_SUBST(INST_SITE_ARCH_DIR)

dnl Add more test


dnl Output
AC_OUTPUT(Makefile)
