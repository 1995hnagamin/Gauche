srcdir       = @srcdir@
top_builddir = @top_builddir@
top_srcdir   = @top_srcdir@

SCM_CATEGORY = scheme

include ../Makefile.ext

LIBFILES = scheme--list.$(SOEXT) \
	   scheme--vector.$(SOEXT)
SCMFILES = list.sci \
	   vector.sci

GENERATED = Makefile
XCLEANFILES = *.c *.sci

OBJECTS = $(list_OBJECTS) $(vector_OBJECTS)

all : $(LIBFILES)

install : install-std

#
# scheme.list (srfi-1)
#

list_OBJECTS = scheme--list.$(OBJEXT)

scheme--list.$(SOEXT) : $(list_OBJECTS)
	$(MODLINK) scheme--list.$(SOEXT) $(list_OBJECTS) $(EXT_LIBGAUCHE) $(LIBS)

scheme--list.c list.sci : $(top_srcdir)/libsrc/scheme/list.scm
	$(PRECOMP) -e -i list.sci -o scheme--list $(top_srcdir)/libsrc/scheme/list.scm

#
# scheme.vector (srfi-133)
#

vector_OBJECTS = scheme--vector.$(OBJEXT)

scheme--vector.$(SOEXT) : $(vector_OBJECTS)
	$(MODLINK) scheme--vector.$(SOEXT) $(vector_OBJECTS) $(EXT_LIBGAUCHE) $(LIBS)

scheme--vector.c vector.sci : $(top_srcdir)/libsrc/scheme/vector.scm
	$(PRECOMP) -e -i vector.sci -o scheme--vector $(top_srcdir)/libsrc/scheme/vector.scm
