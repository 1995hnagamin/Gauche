srcdir       = @srcdir@
top_builddir = @top_builddir@
top_srcdir   = @top_srcdir@

SCM_CATEGORY = gauche

include ../Makefile.ext

LIBFILES = gauche--bcrypt.$(SOEXT)
SCMFILES = bcrypt.sci

GENERATED = Makefile
XCLEANFILES = gauche--bcrypt.c *.sci

OBJECTS = gauche--bcrypt.$(OBJEXT) \
          crypt_blowfish.$(OBJEXT) \
          crypt_gensalt.$(OBJEXT) \
          wrapper.$(OBJEXT)

all : $(LIBFILES)

gauche--bcrypt.$(SOEXT) : $(OBJECTS) 
	$(MODLINK) gauche--bcrypt.$(SOEXT) $(OBJECTS) $(EXT_LIBGAUCHE) $(LIBS)

bcrypt.sci gauche--bcrypt.c : bcrypt.scm
	$(PRECOMP) -e -o gauche--bcrypt bcrypt.scm

install : install-std

