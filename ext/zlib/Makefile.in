srcdir       = @srcdir@
top_builddir = @top_builddir@
top_srcdir   = @top_srcdir@

include ../Makefile.ext

XCPPFLAGS = @ZLIB_CPPFLAGS@
XLDFLAGS  = @ZLIB_LDFLAGS@
XLIBS     = -lz

SCM_CATEGORY = rfc

LIBFILES = @ZLIB_ARCHFILES@
SCMFILES = @ZLIB_SCMFILES@

OBJECTS = zlib_head.$(OBJEXT) gauche-zlib.$(OBJEXT) zliblib.$(OBJEXT) zlib_tail.$(OBJEXT)

GENERATED = Makefile
XCLEANFILES = zliblib.c zlib_head.c zlib_tail.c

EXTRA_INCLUDES = -I$(srcdir)/../uvector

all : $(LIBFILES)

zlib.$(SOEXT) : $(OBJECTS)
	$(MODLINK) zlib.$(SOEXT) $(OBJECTS) @EXT_UVECTOR@ $(EXT_LIBGAUCHE) $(LIBS)

$(OBJECTS) : gauche-zlib.h

zliblib.c : zliblib.stub

zlib_head.c zlib_tail.c :
	$(GAUCHE_CONFIG) --fixup-extension zlib

install : install-std

