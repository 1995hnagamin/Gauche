dnl Process this file with autoconf to produce a configure script.
AC_INIT(src/gauche.h)
AC_CONFIG_HEADER(src/gauche/config.h)

dnl Checks for programs.
AC_PROG_CC
AC_PROG_LN_S
AC_PROG_MAKE_SET
AC_PROG_RANLIB
AC_PROG_INSTALL

dnl Checks for libraries.
AC_CHECK_LIB(m, sin) dnl needed to check trunc and round below
AC_CHECK_LIB(dl, dlopen)
AC_CHECK_FUNCS(trunc round)

dnl Checks for header files.
AC_HEADER_STDC
AC_CHECK_HEADERS(glob.h)
AC_CHECK_HEADERS(dlfcn.h)

dnl Checks for typedefs, structures, and compiler characteristics.
AC_C_INLINE
AC_STRUCT_TM
AC_CHECK_SIZEOF(long)

dnl Checks for library functions.
AC_PROG_GCC_TRADITIONAL

dnl Add version macro
GAUCHE_VERSION=`cat VERSION`
AC_SUBST(GAUCHE_VERSION)
dnl Hack to make this variable visible from config.h.  I don't know
dnl the proper way to do it.
cat >> confdefs.h <<EOF
#define GAUCHE_VERSION "$GAUCHE_VERSION"
EOF

AC_OUTPUT(src/Makefile src/gauche-config lib/Makefile 
          ext/uvector/Makefile
          Makefile)

